"use strict";(self.webpackChunkayush_fhir_frontend=self.webpackChunkayush_fhir_frontend||[]).push([[490],{46291:(e,r,a)=>{a.d(r,{b:()=>l});var s=a(22555),t=a(79722),d=a(23768);const i=t.A.create({baseURL:"http://localhost:5000",timeout:1e4,headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>{const r=localStorage.getItem("authToken");return r&&(e.headers.Authorization="Bearer ".concat(r)),e},e=>Promise.reject(e)),i.interceptors.response.use(e=>e,e=>{var r,a,s,t,i,l;const o=(null===(r=e.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.message)||e.message||"An error occurred";return 401===(null===(s=e.response)||void 0===s?void 0:s.status)?(localStorage.removeItem("authToken"),d.Ay.error("Session expired. Please login again.")):(null===(t=e.response)||void 0===t?void 0:t.status)>=500&&(null===(i=e.response)||void 0===i||null===(l=i.data)||void 0===l||!l.message)?d.Ay.error("Server error. Please try again later."):d.Ay.error(o),Promise.reject(e)});const l={health:()=>i.get("/health"),searchTerms:(e,r)=>i.get("/api/terminology/search",{params:(0,s.A)({q:e},r)}),getTermById:e=>i.get("/api/terminology/term/".concat(e)),getTermsByCategory:e=>i.get("/api/terminology/category/".concat(e)),getMappedTerms:()=>i.get("/api/terminology/mapped"),translateCode:(e,r)=>i.post("/api/translation",{code:e,system:r}),getCodeSystem:()=>i.get("/api/fhir/CodeSystem/namaste"),getConceptMap:()=>i.get("/api/fhir/ConceptMap/namaste-to-icd11"),searchICD11:e=>i.get("/api/icd/search",{params:{q:e}}),ingestCSV:e=>i.post("/admin/ingest-csv",{csvData:e}),loadSampleData:()=>i.post("/admin/load-sample"),getStatistics:()=>i.get("/admin/statistics"),clearData:()=>i.delete("/admin/clear"),getAuthToken:e=>i.post("/auth/token",{abhaId:e})}},50917:(e,r,a)=>{a.d(r,{A:()=>s});const s=(0,a(33797).A)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]])},69490:(e,r,a)=>{a.r(r),a.d(r,{default:()=>u});var s=a(65043),t=a(96938),d=a(60012),i=a(58147),l=a(50917);const o=(0,a(33797).A)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var n=a(82907),c=a(46291),g=a(23768),p=a(74206),m=a(70579);const u=()=>{const[e,r]=(0,s.useState)(""),[a,u]=(0,s.useState)("idle"),x=(0,s.useRef)(null),h=(0,n.useQueryClient)(),{addActivity:y}=(0,p.v)(),b=(0,n.useMutation)(e=>c.b.ingestCSV(e),{onSuccess:()=>{g.Ay.success("CSV uploaded and processed successfully!"),u("success"),y("upload","Uploaded CSV file"),h.invalidateQueries("statistics"),h.invalidateQueries("search")},onError:()=>{g.Ay.error("Failed to upload CSV"),u("error")}});return(0,m.jsxs)("div",{className:"space-y-6",children:[(0,m.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 transition-colors",children:(0,m.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,m.jsx)("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg",children:(0,m.jsx)(i.A,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),(0,m.jsxs)("div",{children:[(0,m.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Upload Data"}),(0,m.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Ingest NAMASTE terminology from CSV files"})]})]})}),(0,m.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 transition-colors",children:(0,m.jsxs)("div",{className:"space-y-6",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select CSV File"}),(0,m.jsx)("input",{ref:x,type:"file",accept:".csv",onChange:e=>{var a;const s=null===(a=e.target.files)||void 0===a?void 0:a[0];if(!s)return;if("text/csv"!==s.type)return void g.Ay.error("Please select a CSV file");const t=new FileReader;t.onload=e=>{var a;const s=null===(a=e.target)||void 0===a?void 0:a.result;r(s),u("idle")},t.readAsText(s)},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-primary-50 file:text-primary-700 hover:file:bg-primary-100 dark:file:bg-primary-900/30 dark:file:text-primary-400"})]}),e&&(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"CSV Content Preview"}),(0,m.jsxs)("div",{className:"bg-gray-900 text-green-400 p-4 rounded-lg font-mono text-sm overflow-x-auto max-h-40",children:[(0,m.jsx)("pre",{children:e.split("\n").slice(0,5).join("\n")}),e.split("\n").length>5&&(0,m.jsxs)("div",{className:"text-gray-500",children:["... and ",e.split("\n").length-5," more lines"]})]})]}),(0,m.jsx)(t.N,{children:"idle"!==a&&(0,m.jsx)(d.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"p-4 rounded-lg ".concat("success"===a?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"error"===a?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800":"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800"),children:(0,m.jsxs)("div",{className:"flex items-center space-x-2",children:["success"===a?(0,m.jsx)(l.A,{className:"h-5 w-5 text-green-600 dark:text-green-400"}):"error"===a?(0,m.jsx)(o,{className:"h-5 w-5 text-red-600 dark:text-red-400"}):(0,m.jsx)("div",{className:"spinner"}),(0,m.jsx)("span",{className:"font-medium ".concat("success"===a?"text-green-800 dark:text-green-300":"error"===a?"text-red-800 dark:text-red-300":"text-blue-800 dark:text-blue-300"),children:"success"===a?"Upload successful!":"error"===a?"Upload failed!":"Uploading..."})]})})}),(0,m.jsx)("button",{onClick:()=>{e.trim()?(u("uploading"),b.mutate(e)):g.Ay.error("Please select a CSV file or enter CSV content")},disabled:b.isLoading||!e,className:"btn-primary flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:b.isLoading?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"spinner"}),(0,m.jsx)("span",{children:"Uploading..."})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(i.A,{className:"h-4 w-4"}),(0,m.jsx)("span",{children:"Upload CSV"})]})})]})})]})}}}]);
//# sourceMappingURL=490.d6c4e094.chunk.js.map