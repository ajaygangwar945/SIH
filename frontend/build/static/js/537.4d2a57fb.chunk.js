"use strict";(self.webpackChunkayush_fhir_frontend=self.webpackChunkayush_fhir_frontend||[]).push([[537],{20658:(e,r,t)=>{t.d(r,{A:()=>a});const a=(0,t(33797).A)("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]])},25979:(e,r,t)=>{t.d(r,{A:()=>a});const a=(0,t(33797).A)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},46291:(e,r,t)=>{t.d(r,{b:()=>o});var a=t(22555),s=t(79722),d=t(23768);const i=s.A.create({baseURL:"http://localhost:5000",timeout:1e4,headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>{const r=localStorage.getItem("authToken");return r&&(e.headers.Authorization="Bearer ".concat(r)),e},e=>Promise.reject(e)),i.interceptors.response.use(e=>e,e=>{var r,t,a,s,i,o;const n=(null===(r=e.response)||void 0===r||null===(t=r.data)||void 0===t?void 0:t.message)||e.message||"An error occurred";return 401===(null===(a=e.response)||void 0===a?void 0:a.status)?(localStorage.removeItem("authToken"),d.Ay.error("Session expired. Please login again.")):(null===(s=e.response)||void 0===s?void 0:s.status)>=500&&(null===(i=e.response)||void 0===i||null===(o=i.data)||void 0===o||!o.message)?d.Ay.error("Server error. Please try again later."):d.Ay.error(n),Promise.reject(e)});const o={health:()=>i.get("/health"),searchTerms:(e,r)=>i.get("/api/terminology/search",{params:(0,a.A)({q:e},r)}),getTermById:e=>i.get("/api/terminology/term/".concat(e)),getTermsByCategory:e=>i.get("/api/terminology/category/".concat(e)),getMappedTerms:()=>i.get("/api/terminology/mapped"),translateCode:(e,r)=>i.post("/api/translation",{code:e,system:r}),getCodeSystem:()=>i.get("/api/fhir/CodeSystem/namaste"),getConceptMap:()=>i.get("/api/fhir/ConceptMap/namaste-to-icd11"),searchICD11:e=>i.get("/api/icd/search",{params:{q:e}}),ingestCSV:e=>i.post("/admin/ingest-csv",{csvData:e}),loadSampleData:()=>i.post("/admin/load-sample"),getStatistics:()=>i.get("/admin/statistics"),clearData:()=>i.delete("/admin/clear"),getAuthToken:e=>i.post("/auth/token",{abhaId:e})}},64537:(e,r,t)=>{t.r(r),t.d(r,{default:()=>v});var a=t(65043),s=t(96938),d=t(60012),i=t(82907),o=t(49256),n=t(33797);const l=(0,n.A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),c=(0,n.A)("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]),m=(0,n.A)("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);var x=t(85099),g=t(83768),y=t(81024),h=t(25979),p=t(20658),u=t(46291),b=t(25556),f=t(23768),k=t(74206),j=t(70579);const v=()=>{const[e,r]=(0,a.useState)(""),[t,n]=(0,a.useState)(""),[v,N]=(0,a.useState)("score"),[w,A]=(0,a.useState)("desc"),[S,C]=(0,a.useState)(""),[M,T]=(0,a.useState)(""),{addActivity:_}=(0,k.v)();(0,a.useEffect)(()=>{const r=setTimeout(()=>{n(e)},300);return()=>clearTimeout(r)},[e]),(0,a.useEffect)(()=>{t.length>=2&&_("search",'Searched for "'.concat(t,'"'))},[t,_]);const{data:D,isLoading:I,error:q}=(0,i.useQuery)(["search",t,S],async()=>(await u.b.searchTerms(t,{category:S||void 0})).data.results||[],{enabled:t.length>=2}),{data:E}=(0,i.useQuery)("statistics",async()=>{var e;const r=null===(e=(await u.b.getStatistics()).data.statistics)||void 0===e?void 0:e.categories;return Array.isArray(r)?r:[]},{refetchOnWindowFocus:!1}),P=a.useMemo(()=>D?[...D].sort((e,r)=>{let t=0;return t="score"===v?e.score-r.score:e.term.term.localeCompare(r.term.term),"asc"===w?t:-t}):[],[D,v,w]);return(0,j.jsxs)("div",{className:"space-y-6",children:[(0,j.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4 sm:p-6 transition-colors font-sans",children:[(0,j.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,j.jsx)("div",{className:"p-2 bg-primary-100 dark:bg-primary-900/30 rounded-lg shrink-0",children:(0,j.jsx)(o.A,{className:"h-5 w-5 sm:h-6 sm:w-6 text-primary-600 dark:text-primary-400"})}),(0,j.jsxs)("div",{children:[(0,j.jsx)("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:"Search & Browse"}),(0,j.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Find NAMASTE terminology"})]})]}),(0,j.jsxs)("div",{className:"relative",children:[(0,j.jsx)(o.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,j.jsx)("input",{type:"text",value:e,onChange:e=>r(e.target.value),placeholder:"Search terminology...",className:"w-full pl-10 pr-4 py-2 sm:py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent text-base sm:text-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500"})]}),(0,j.jsxs)("div",{className:"flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:items-center sm:gap-4 mt-4",children:[(0,j.jsxs)("div",{className:"flex items-center space-x-2 flex-grow sm:flex-grow-0",children:[(0,j.jsx)(l,{className:"h-4 w-4 text-gray-500 dark:text-gray-400 shrink-0"}),(0,j.jsxs)("select",{value:S,onChange:e=>C(e.target.value),title:"Category Filter",className:"flex-1 sm:w-48 px-3 py-1.5 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 transition-colors",children:[(0,j.jsx)("option",{value:"",children:"All Categories"}),Array.isArray(E)&&E.map(e=>(0,j.jsx)("option",{value:e,children:e},e))]})]}),(0,j.jsxs)("div",{className:"flex items-center space-x-2 w-full sm:w-auto",children:[(0,j.jsxs)("select",{value:v,onChange:e=>N(e.target.value),title:"Sort By",className:"flex-1 sm:w-auto px-3 py-1.5 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 transition-colors",children:[(0,j.jsx)("option",{value:"score",children:"Sort by Score"}),(0,j.jsx)("option",{value:"name",children:"Sort by Name"})]}),(0,j.jsx)("button",{onClick:()=>A("asc"===w?"desc":"asc"),className:"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md border border-gray-300 dark:border-gray-600 transition-colors shrink-0",title:"asc"===w?"Descending":"Ascending",children:"asc"===w?(0,j.jsx)(c,{className:"h-4 w-4 text-gray-500 dark:text-gray-400"}):(0,j.jsx)(m,{className:"h-4 w-4 text-gray-500 dark:text-gray-400"})})]})]})]}),(0,j.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 transition-colors",children:[I&&t&&(0,j.jsx)("div",{className:"p-8",children:(0,j.jsx)(b.A,{message:"Searching..."})}),q&&(0,j.jsxs)("div",{className:"p-8 text-center",children:[(0,j.jsx)("div",{className:"text-red-600 mb-2 font-medium",children:"Search failed"}),(0,j.jsx)("p",{className:"text-sm text-gray-600",children:"Please try again"})]}),!I&&!q&&t&&(0,j.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,j.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2 mb-4",children:[(0,j.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Results (",P.length,")"]}),(0,j.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400 italic",children:e&&'Results for "'.concat(e,'"')})]}),(0,j.jsx)(s.N,{children:(0,j.jsx)("div",{className:"space-y-4",children:P.map((e,r)=>(0,j.jsx)(d.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{delay:Math.min(.05*r,.5)},className:"border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800/50 rounded-xl p-4 sm:p-5 hover:shadow-lg transition-all",children:(0,j.jsxs)("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-4",children:[(0,j.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,j.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,j.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white leading-tight",children:e.term.term}),(0,j.jsx)("span",{className:"px-2 py-0.5 bg-primary-100 dark:bg-primary-900/30 text-primary-800 dark:text-primary-300 text-[10px] sm:text-xs font-bold rounded-full uppercase tracking-wider",children:e.term.category}),(0,j.jsxs)("span",{className:"flex items-center text-xs font-medium text-gray-500 dark:text-gray-400",children:[(0,j.jsx)(x.A,{className:"h-3 w-3 mr-1"}),e.score.toFixed(1)]})]}),e.term.description&&(0,j.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 leading-relaxed font-sans",children:e.term.description}),e.term.synonyms.length>0&&(0,j.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,j.jsx)(g.A,{className:"h-3.5 w-3.5 text-gray-400 shrink-0"}),e.term.synonyms.map((e,r)=>(0,j.jsx)("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-400 text-xs rounded border border-gray-200 dark:border-gray-600 font-sans",children:e},r))]}),(0,j.jsxs)("div",{className:"flex flex-wrap items-center gap-y-2 gap-x-4 pt-2 border-t border-gray-100 dark:border-gray-700/50",children:[(0,j.jsxs)("div",{className:"flex items-center text-[11px] sm:text-xs text-gray-500 dark:text-gray-400",children:[(0,j.jsx)("span",{className:"font-semibold mr-1",children:"ID:"})," ",e.term.id]}),e.term.icd11_tm2_code&&(0,j.jsxs)("div",{className:"flex items-center text-[11px] sm:text-xs text-gray-500 dark:text-gray-400",children:[(0,j.jsx)("span",{className:"font-semibold mr-1",children:"ICD-11:"})," ",e.term.icd11_tm2_code]}),e.term.references&&(0,j.jsxs)("div",{className:"flex items-center text-[11px] sm:text-xs text-gray-500 dark:text-gray-400",children:[(0,j.jsx)("span",{className:"font-semibold mr-1",children:"Ref:"})," ",e.term.references]})]})]}),(0,j.jsxs)("div",{className:"flex items-center md:flex-col gap-2 shrink-0 border-t md:border-t-0 pt-3 md:pt-0 border-gray-100 dark:border-gray-700/50",children:[(0,j.jsxs)("button",{onClick:()=>{return r=e.term.id,navigator.clipboard.writeText(r),T(r),f.Ay.success("ID copied to clipboard!"),void setTimeout(()=>T(""),2e3);var r},className:"flex-1 md:flex-none p-2.5 bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 border border-gray-200 dark:border-gray-600 rounded-lg transition-colors flex items-center justify-center",title:"Copy ID",children:[M===e.term.id?(0,j.jsx)(y.A,{className:"h-4 w-4 text-green-600"}):(0,j.jsx)(h.A,{className:"h-4 w-4 text-gray-500"}),(0,j.jsx)("span",{className:"ml-2 md:hidden text-xs font-medium text-gray-600",children:"Copy ID"})]}),e.term.icd11_tm2_code&&(0,j.jsxs)("button",{onClick:()=>window.open("https://icd.who.int/browse11/l-m/en#/http://id.who.int/icd/entity/".concat(e.term.icd11_tm2_code),"_blank"),className:"flex-1 md:flex-none p-2.5 bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 border border-gray-200 dark:border-gray-600 rounded-lg transition-colors flex items-center justify-center",title:"View in ICD-11",children:[(0,j.jsx)(p.A,{className:"h-4 w-4 text-gray-500"}),(0,j.jsx)("span",{className:"ml-2 md:hidden text-xs font-medium text-gray-600",children:"View Reference"})]})]})]})},e.term.id))})}),0===P.length&&(0,j.jsxs)("div",{className:"text-center py-8",children:[(0,j.jsx)(o.A,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,j.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No results found"}),(0,j.jsx)("p",{className:"text-gray-600",children:"Try adjusting your search terms or filters"})]})]}),!t&&(0,j.jsxs)("div",{className:"p-8 text-center",children:[(0,j.jsx)(o.A,{className:"h-12 w-12 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),(0,j.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Start searching"}),(0,j.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Enter a search term to find NAMASTE terminology"})]})]})]})}},81024:(e,r,t)=>{t.d(r,{A:()=>a});const a=(0,t(33797).A)("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]])},83768:(e,r,t)=>{t.d(r,{A:()=>a});const a=(0,t(33797).A)("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]])}}]);
//# sourceMappingURL=537.4d2a57fb.chunk.js.map