"use strict";(self.webpackChunkayush_fhir_frontend=self.webpackChunkayush_fhir_frontend||[]).push([[537],{20658:(e,t,r)=>{r.d(t,{A:()=>s});const s=(0,r(33797).A)("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]])},25979:(e,t,r)=>{r.d(t,{A:()=>s});const s=(0,r(33797).A)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},46291:(e,t,r)=>{r.d(t,{b:()=>i});var s=r(22555),a=r(79722),n=r(23768);const o=a.A.create({baseURL:"http://localhost:5000",timeout:1e4,headers:{"Content-Type":"application/json"}});o.interceptors.request.use(e=>{const t=localStorage.getItem("authToken");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),o.interceptors.response.use(e=>e,e=>{var t,r,s,a,o,i;const c=(null===(t=e.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||e.message||"An error occurred";return 401===(null===(s=e.response)||void 0===s?void 0:s.status)?(localStorage.removeItem("authToken"),n.Ay.error("Session expired. Please login again.")):(null===(a=e.response)||void 0===a?void 0:a.status)>=500&&(null===(o=e.response)||void 0===o||null===(i=o.data)||void 0===i||!i.message)?n.Ay.error("Server error. Please try again later."):n.Ay.error(c),Promise.reject(e)});const i={health:()=>o.get("/health"),searchTerms:(e,t)=>o.get("/api/terminology/search",{params:(0,s.A)({q:e},t)}),getTermById:e=>o.get("/api/terminology/term/".concat(e)),getTermsByCategory:e=>o.get("/api/terminology/category/".concat(e)),getMappedTerms:()=>o.get("/api/terminology/mapped"),translateCode:(e,t)=>o.post("/api/translation",{code:e,system:t}),getCodeSystem:()=>o.get("/api/fhir/CodeSystem/namaste"),getConceptMap:()=>o.get("/api/fhir/ConceptMap/namaste-to-icd11"),searchICD11:e=>o.get("/api/icd/search",{params:{q:e}}),ingestCSV:e=>o.post("/admin/ingest-csv",{csvData:e}),loadSampleData:()=>o.post("/admin/load-sample"),getStatistics:()=>o.get("/admin/statistics"),clearData:()=>o.delete("/admin/clear"),getAuthToken:e=>o.post("/auth/token",{abhaId:e})}},64537:(e,t,r)=>{r.r(t),r.d(t,{default:()=>k});var s=r(65043),a=r(96938),n=r(60012),o=r(82907),i=r(49256),c=r(33797);const d=(0,c.A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),l=(0,c.A)("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]),m=(0,c.A)("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);var h=r(83768),p=r(81024),x=r(25979),u=r(20658),y=r(46291),g=r(25556),f=r(23768),v=r(70579);const k=()=>{const[e,t]=(0,s.useState)(""),[r,c]=(0,s.useState)(""),[k,b]=(0,s.useState)("score"),[j,N]=(0,s.useState)("desc"),[w,A]=(0,s.useState)(""),[C,E]=(0,s.useState)("");(0,s.useEffect)(()=>{const t=setTimeout(()=>{c(e)},300);return()=>clearTimeout(t)},[e]);const{data:S,isLoading:M,error:R}=(0,o.useQuery)(["search",r,w],()=>y.b.searchTerms(r,{category:w||void 0}),{enabled:r.length>=2,select:e=>e.data.results||[]}),{data:P}=(0,o.useQuery)("statistics",()=>y.b.getStatistics().then(e=>e.data),{select:e=>{var t;return(null===(t=e.statistics)||void 0===t?void 0:t.categories)||[]}}),T=s.useMemo(()=>S?[...S].sort((e,t)=>{let r=0;return r="score"===k?e.score-t.score:e.term.term.localeCompare(t.term.term),"asc"===j?r:-r}):[],[S,k,j]);return(0,v.jsxs)("div",{className:"space-y-6",children:[(0,v.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 transition-colors",children:[(0,v.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,v.jsx)("div",{className:"p-2 bg-primary-100 dark:bg-primary-900/30 rounded-lg",children:(0,v.jsx)(i.A,{className:"h-6 w-6 text-primary-600 dark:text-primary-400"})}),(0,v.jsxs)("div",{children:[(0,v.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Search & Browse"}),(0,v.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Find NAMASTE terminology with advanced search"})]})]}),(0,v.jsxs)("div",{className:"relative",children:[(0,v.jsx)(i.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,v.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Search for terms, synonyms, or concepts...",className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent text-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500"})]}),(0,v.jsxs)("div",{className:"flex flex-wrap items-center gap-4 mt-4",children:[(0,v.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,v.jsx)(d,{className:"h-4 w-4 text-gray-500 dark:text-gray-400"}),(0,v.jsxs)("select",{value:w,onChange:e=>A(e.target.value),className:"px-3 py-1 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 transition-colors",children:[(0,v.jsx)("option",{value:"",children:"All Categories"}),null===P||void 0===P?void 0:P.map(e=>(0,v.jsx)("option",{value:e,children:e},e))]})]}),(0,v.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,v.jsxs)("select",{value:k,onChange:e=>b(e.target.value),className:"px-3 py-1 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 transition-colors",children:[(0,v.jsx)("option",{value:"score",children:"Sort by Score"}),(0,v.jsx)("option",{value:"name",children:"Sort by Name"})]}),(0,v.jsx)("button",{onClick:()=>N("asc"===j?"desc":"asc"),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",children:"asc"===j?(0,v.jsx)(l,{className:"h-4 w-4 text-gray-500 dark:text-gray-400"}):(0,v.jsx)(m,{className:"h-4 w-4 text-gray-500 dark:text-gray-400"})})]})]})]}),(0,v.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 transition-colors",children:[M&&r&&(0,v.jsx)("div",{className:"p-8",children:(0,v.jsx)(g.A,{message:"Searching..."})}),R&&(0,v.jsxs)("div",{className:"p-8 text-center",children:[(0,v.jsx)("div",{className:"text-red-600 mb-2",children:"Search failed"}),(0,v.jsx)("p",{className:"text-gray-600",children:"Please try again"})]}),!M&&!R&&r&&(0,v.jsxs)("div",{className:"p-6",children:[(0,v.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,v.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Search Results (",T.length,")"]}),e&&(0,v.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:['Results for "',e,'"']})]}),(0,v.jsx)(a.N,{children:(0,v.jsx)("div",{className:"space-y-4",children:T.map((e,t)=>(0,v.jsx)(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:.05*t},className:"border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800/50 rounded-lg p-4 hover:shadow-md transition-shadow",children:(0,v.jsxs)("div",{className:"flex items-start justify-between",children:[(0,v.jsxs)("div",{className:"flex-1",children:[(0,v.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,v.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.term.term}),(0,v.jsx)("span",{className:"px-2 py-1 bg-primary-100 dark:bg-primary-900/30 text-primary-800 dark:text-primary-300 text-xs font-medium rounded-full",children:e.term.category}),(0,v.jsxs)("div",{className:"flex items-center space-x-1 text-sm text-gray-500 dark:text-gray-400",children:[(0,v.jsx)("span",{children:"Score:"}),(0,v.jsx)("span",{className:"font-medium",children:e.score.toFixed(1)})]})]}),e.term.description&&(0,v.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mb-3",children:e.term.description}),e.term.synonyms.length>0&&(0,v.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:[(0,v.jsx)(h.A,{className:"h-4 w-4 text-gray-400"}),(0,v.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Synonyms:"}),e.term.synonyms.map((e,t)=>(0,v.jsx)("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-sm rounded-md",children:e},t))]}),(0,v.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[(0,v.jsxs)("span",{children:["ID: ",e.term.id]}),e.term.icd11_tm2_code&&(0,v.jsxs)("span",{children:["ICD-11: ",e.term.icd11_tm2_code]}),e.term.references&&(0,v.jsxs)("span",{children:["Ref: ",e.term.references]})]})]}),(0,v.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,v.jsx)("button",{onClick:()=>{return t=e.term.id,navigator.clipboard.writeText(t),E(t),f.Ay.success("ID copied to clipboard!"),void setTimeout(()=>E(""),2e3);var t},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",title:"Copy ID",children:C===e.term.id?(0,v.jsx)(p.A,{className:"h-4 w-4 text-green-600 dark:text-green-400"}):(0,v.jsx)(x.A,{className:"h-4 w-4 text-gray-500 dark:text-gray-400"})}),e.term.icd11_tm2_code&&(0,v.jsx)("button",{onClick:()=>window.open("https://icd.who.int/browse11/l-m/en#/http://id.who.int/icd/entity/".concat(e.term.icd11_tm2_code),"_blank"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors",title:"View in ICD-11",children:(0,v.jsx)(u.A,{className:"h-4 w-4 text-gray-500 dark:text-gray-400"})})]})]})},e.term.id))})}),0===T.length&&(0,v.jsxs)("div",{className:"text-center py-8",children:[(0,v.jsx)(i.A,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,v.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No results found"}),(0,v.jsx)("p",{className:"text-gray-600",children:"Try adjusting your search terms or filters"})]})]}),!r&&(0,v.jsxs)("div",{className:"p-8 text-center",children:[(0,v.jsx)(i.A,{className:"h-12 w-12 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),(0,v.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Start searching"}),(0,v.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Enter a search term to find NAMASTE terminology"})]})]})]})}},81024:(e,t,r)=>{r.d(t,{A:()=>s});const s=(0,r(33797).A)("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]])},83768:(e,t,r)=>{r.d(t,{A:()=>s});const s=(0,r(33797).A)("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]])},96938:(e,t,r)=>{r.d(t,{N:()=>y});var s=r(65043),a=r(40293);function n(){const e=(0,s.useRef)(!1);return(0,a.E)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var o=r(37065);var i=r(9674),c=r(34930);class d extends s.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function l(e){let{children:t,isPresent:r}=e;const a=(0,s.useId)(),n=(0,s.useRef)(null),o=(0,s.useRef)({width:0,height:0,top:0,left:0});return(0,s.useInsertionEffect)(()=>{const{width:e,height:t,top:s,left:i}=o.current;if(r||!n.current||!e||!t)return;n.current.dataset.motionPopId=a;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule('\n          [data-motion-pop-id="'.concat(a,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            top: ").concat(s,"px !important;\n            left: ").concat(i,"px !important;\n          }\n        ")),()=>{document.head.removeChild(c)}},[r]),s.createElement(d,{isPresent:r,childRef:n,sizeRef:o},s.cloneElement(t,{ref:n}))}const m=e=>{let{children:t,initial:r,isPresent:a,onExitComplete:n,custom:o,presenceAffectsLayout:d,mode:m}=e;const p=(0,c.M)(h),x=(0,s.useId)(),u=(0,s.useMemo)(()=>({id:x,initial:r,isPresent:a,custom:o,onExitComplete:e=>{p.set(e,!0);for(const t of p.values())if(!t)return;n&&n()},register:e=>(p.set(e,!1),()=>p.delete(e))}),d?void 0:[a]);return(0,s.useMemo)(()=>{p.forEach((e,t)=>p.set(t,!1))},[a]),s.useEffect(()=>{!a&&!p.size&&n&&n()},[a]),"popLayout"===m&&(t=s.createElement(l,{isPresent:a},t)),s.createElement(i.t.Provider,{value:u},t)};function h(){return new Map}var p=r(2190);var x=r(58129);const u=e=>e.key||"";const y=e=>{let{children:t,custom:r,initial:i=!0,onExitComplete:c,exitBeforeEnter:d,presenceAffectsLayout:l=!0,mode:h="sync"}=e;(0,x.V)(!d,"Replace exitBeforeEnter with mode='wait'");const y=(0,s.useContext)(p.L).forceRender||function(){const e=n(),[t,r]=(0,s.useState)(0),a=(0,s.useCallback)(()=>{e.current&&r(t+1)},[t]);return[(0,s.useCallback)(()=>o.Gt.postRender(a),[a]),t]}()[0],g=n(),f=function(e){const t=[];return s.Children.forEach(e,e=>{(0,s.isValidElement)(e)&&t.push(e)}),t}(t);let v=f;const k=(0,s.useRef)(new Map).current,b=(0,s.useRef)(v),j=(0,s.useRef)(new Map).current,N=(0,s.useRef)(!0);var w;if((0,a.E)(()=>{N.current=!1,function(e,t){e.forEach(e=>{const r=u(e);t.set(r,e)})}(f,j),b.current=v}),w=()=>{N.current=!0,j.clear(),k.clear()},(0,s.useEffect)(()=>()=>w(),[]),N.current)return s.createElement(s.Fragment,null,v.map(e=>s.createElement(m,{key:u(e),isPresent:!0,initial:!!i&&void 0,presenceAffectsLayout:l,mode:h},e)));v=[...v];const A=b.current.map(u),C=f.map(u),E=A.length;for(let s=0;s<E;s++){const e=A[s];-1!==C.indexOf(e)||k.has(e)||k.set(e,void 0)}return"wait"===h&&k.size&&(v=[]),k.forEach((e,t)=>{if(-1!==C.indexOf(t))return;const a=j.get(t);if(!a)return;const n=A.indexOf(t);let o=e;if(!o){const e=()=>{k.delete(t);const e=Array.from(j.keys()).filter(e=>!C.includes(e));if(e.forEach(e=>j.delete(e)),b.current=f.filter(r=>{const s=u(r);return s===t||e.includes(s)}),!k.size){if(!1===g.current)return;y(),c&&c()}};o=s.createElement(m,{key:u(a),isPresent:!1,onExitComplete:e,custom:r,presenceAffectsLayout:l,mode:h},a),k.set(t,o)}v.splice(n,0,o)}),v=v.map(e=>{const t=e.key;return k.has(t)?e:s.createElement(m,{key:u(e),isPresent:!0,presenceAffectsLayout:l,mode:h},e)}),s.createElement(s.Fragment,null,k.size?v:v.map(e=>(0,s.cloneElement)(e)))}}}]);
//# sourceMappingURL=537.8ccbabe0.chunk.js.map